<div id="new-quote-overlay">
    <a class="close-cross" routerLink="../">
        <img src="/assets/icons/cross.svg">
    </a>

    <div class="new-quote--container">
        <form (ngSubmit)="addNewQuote(previewCanvas)" #newChildForm="ngForm">
            <div class="form-input-group">
                <label for="name">Quote<span style="color:red">*</span></label>
                <input type="text"
                    name="quote"
                    id="quote"
                    #quote="ngModel"
                    [(ngModel)]="quoteModel.quote"
                    (keyup)="updateCanvasOnKeyup()"
                    (change)="updateCanvasOnChange()"
                    autofocus
                    required
                >

                <scrblr-form-error *ngIf="quote.errors && (quote.dirty || quote.touched)"
                    [model]="quote"
                    [modelName]="'Quote'">
                </scrblr-form-error>
            </div>

            <div class="form-input-group">
                <label for="name">Story<span style="color:red">*</span></label>
                <input type="text" name="story" id="story" #story="ngModel" [(ngModel)]="quoteModel.story" required>

                <scrblr-form-error *ngIf="story.errors && (story.dirty || story.touched)"
                    [model]="story"
                    [modelName]="'Story'">
                </scrblr-form-error>
            </div>

            <div class="form-input-group">
                <label for="gender">Font</label>
                <select id="font" name="font" #font="ngModel" [(ngModel)]="quoteModel.font" (change)="updateCanvasOnChange()" required>
                    <option *ngFor="let font of fonts" [value]="font">{{ font }}</option>
                </select>

                <scrblr-form-error *ngIf="font.errors && (font.dirty ||font.touched)"
                    [model]="font"
                    [modelName]="'Font'">
                </scrblr-form-error>
            </div>

            <button type="submit" class="btn btn-primary btn-color-main" [disabled]="!newChildForm.valid">New</button>

        </form>

        <div class="new-quote-preview--container">
            <div class="canvas--container">
                <canvas id="preview-canvas" class="canvas-style" #previewCanvas></canvas>
            </div>

            <ul class="preset-picker" *ngIf="presetPickerActive">
                <li class="preset">
                    <a (click)="changeImage($event)">
                        <img src="/assets/preset-imgs/mountains.jpg" alt="mountains">
                    </a>
                </li>
                <li class="preset">
                    <a (click)="changeImage($event)">
                        <img src="/assets/preset-imgs/paint.jpg" alt="paint">
                    </a>
                </li>
                <li class="preset">
                    <a (click)="changeImage($event)">
                        <img src="/assets/preset-imgs/pencils.jpg" alt="pencils">
                    </a>
                </li>
                <li class="preset">
                    <a (click)="changeImage($event)">
                        <img src="/assets/preset-imgs/school_desk.jpg" alt="school_desk">
                    </a>
                </li>
            </ul>

            <img [src]="quoteModel.selectedPreset" id="presetImg" #presetImg (load)="initCanvas(presetImg, previewCanvas, '40')" *ngIf="presetPickerActive">

            <div id="dropzone" [hidden]="presetPickerActive" #dropzone></div>
            <img src="" [hidden]="presetPickerActive" id="userImg" #userImg (load)="startAviary()" cross-origin="anonymous">

            <button class="btn btn-primary" (click)="toggleImageMode()">
                <span *ngIf="presetPickerActive">{{ buttonMessage.your_own }}</span>
                <span *ngIf="!presetPickerActive">{{ buttonMessage.preset }}</span>
            </button>
        </div>
    </div>
</div>
