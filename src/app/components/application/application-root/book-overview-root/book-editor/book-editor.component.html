<div id="book-editor">
    <div class="close-editor" (click)="closeEditor()">
        <i class="fa fa-arrow-left"></i>
    </div>

    <!--<button (click)="saveBook()">Save</button>-->



    <div id="book-window">
        <span *ngIf="currentPageModel !== 0" class="previous" (click)="previousPage()"><i class="fa fa-chevron-left fa-3x"></i></span>

        <div id="book-front-page" *ngIf="currentPageModel === 0">
            <select id="color" name="color" #color="ngModel" [(ngModel)]="bookModel.color" required>
                <option [value]="'#4E84D5'">Blue</option>
                <option [value]="'#F7AB48'">Orange</option>
                <option [value]="'#CA60ED'">Purple</option>
                <option [value]="'#6DD472'">Green</option>
            </select>
            <div class="front-page">
                <svg id="front-page-logo" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000">
                    <defs>
                        <style>
                            .cls-1 {
                                fill: {{ bookModel.color }};
                            }

                            .cls-2 {
                                fill: #fff;
                            }
                        </style>
                    </defs>
                    <title>book-cover-quotes-01</title>
                    <path class="cls-1" d="M812.63,545.41h159A67.88,67.88,0,0,1,1039.85,613q0,.29,0,.59v22.7A181.89,181.89,0,0,1,858,818.11H812.56a46.06,46.06,0,0,0-45.47,45.47v90.95A46.06,46.06,0,0,0,812.56,1000H858a354.34,354.34,0,0,0,141-28.78,360.2,360.2,0,0,0,193.9-193.9,354.19,354.19,0,0,0,28.78-141v-500a131.8,131.8,0,0,0-39.76-96.58A131.81,131.81,0,0,0,1085.32,0H812.63A131.81,131.81,0,0,0,716,39.79a131.8,131.8,0,0,0-39.76,96.58V409.07A135.83,135.83,0,0,0,811.6,545.41Z"
                    />
                    <path class="cls-1" d="M79.35,505.65a131.81,131.81,0,0,0,96.58,39.76H335.64A67.88,67.88,0,0,1,403.81,613q0,.29,0,.59v22.7A181.82,181.82,0,0,1,222,818.11H176.52A46.13,46.13,0,0,0,131,863.58v90.95A46.13,46.13,0,0,0,176.52,1000H222a354.41,354.41,0,0,0,141-28.78,360.27,360.27,0,0,0,193.83-193.9,354.27,354.27,0,0,0,28.78-141v-500a131.8,131.8,0,0,0-39.76-96.58A131.81,131.81,0,0,0,449.28,0H176.59A131.81,131.81,0,0,0,79.35,39.79a131.8,131.8,0,0,0-39.76,96.58V409.07A131.8,131.8,0,0,0,79.35,505.65Z"
                    />
                    <path class="cls-2" d="M171.63,251.26c14.32,0,25.31,7.48,26,20.14H178.35c-.44-4.4-3.08-5.5-7.81-5.5s-7.37,1.54-7.37,4.51c0,9.47,34.67,2.31,34.67,24.21,0,11.67-11.22,19.48-25.75,19.48S146,307.83,145,293.85h19.26c.55,4.18,3.52,5.61,7.92,5.61s7.59-2.31,7.59-5.28c0-9.68-34.67-2.54-34.67-23.78C145.11,260.18,154,251.26,171.63,251.26Z"
                    />
                    <path class="cls-2" d="M217.9,267.22a9.27,9.27,0,0,1,9,5.5h11.82V258.23c-5.31-4.6-12.51-7-20.84-7-17.72,0-30.59,12-30.59,31.37s12.87,31.5,30.59,31.5c8.33,0,15.53-2.68,20.84-7.39V292.53H226.93c-2.09,4.07-4.29,5.5-9,5.5-7.7,0-11.45-6.49-11.45-15.41S210.2,267.22,217.9,267.22Z"
                    />
                    <path class="cls-2" d="M257.32,314.11H238.5V252.31h18.82v11.45c4-7.26,10-12.11,17.61-12.11V270.8h-4.62c-8.25,0-13,3.19-13,13.87Z"
                    />
                    <path class="cls-2" d="M272.48,237.95a11,11,0,1,1,11,11,10.93,10.93,0,0,1-11-11Zm1.6,13.7h18.82l.06,62.47H274.13Z" />
                    <path class="cls-2" d="M333.09,252c-8.14,0-14.09,3.19-18,8.69V232.58H296.22v81.53H315V305.8c4.07,5.95,9.91,8.31,18,8.31,5.8,0,11.21-1.13,15.71-4.41V257.08A26.39,26.39,0,0,0,333.09,252Zm-4.62,46.56c-6.38,0-13.43-4.85-13.43-15.19s7-15.08,13.43-15.08,13.43,4.85,13.43,15.19-7,15.08-13.43,15.08Z"
                    />
                    <path class="cls-2" d="M406.3,232.74h18.82v81.37H406.3Z" />
                    <path class="cls-2" d="M446.39,314.11H427.57V252.77h18.82v11.45c4-7.26,10-12.11,17.61-12.11v19.15h-4.62c-8.25,0-13,3.19-13,13.87Z"
                    />
                    <path class="cls-2" d="M388.12,252c-8.14,0-14.09,3.19-18,8.69V232.58H351.24v81.53h18.82V305.8c4.07,5.94,9.91,8.3,18,8.3,5.8,0,11.21-1.13,15.71-4.41V257.08A26.39,26.39,0,0,0,388.12,252Zm-4.62,46.56c-6.38,0-13.43-4.85-13.43-15.19s7-15.08,13.43-15.08,13.43,4.85,13.43,15.19-7,15.08-13.43,15.08Z"
                    />
                </svg>
            </div>
        </div>

        <div id="book-preview" *ngIf="currentPageModel >= 1">
            <div class="book" *ngIf="isMemoryBoolean === false">
                <div class="page-left" data-is-memory="false" dnd-droppable (onDropSuccess)="transferDataSuccess($event)">
                    <scrblr-book-page [pageData]="book[currentPageModel - 1][0]" [src]="currentImages[0]" [loadingColor]="bookModel.color"></scrblr-book-page>
                    <span class="page-number">{{ (currentPageModel * 2) - 1 }}</span>
                </div>
                <hr>
                <div class="page-right" data-is-memory="false" dnd-droppable (onDropSuccess)="transferDataSuccess($event)">
                    <scrblr-book-page [pageData]="book[currentPageModel - 1][1]" [src]="currentImages[1]" [loadingColor]="bookModel.color"></scrblr-book-page>
                    <span class="page-number">{{ (currentPageModel * 2) }}</span>
                </div>
            </div>

            <div class="book" *ngIf="isMemoryBoolean === true">
                <div class="page-left" data-is-memory="true" dnd-droppable (onDropSuccess)="transferDataSuccess($event)">
                    <scrblr-book-page [pageData]="book[currentPageModel - 1][0]" [src]="currentImages[0]" [loadingColor]="bookModel.color"></scrblr-book-page>
                    <span class="page-number">{{ (currentPageModel * 2) - 1 }}</span>
                </div>
                <hr>
                <div class="page-right" data-is-memory="true" dnd-droppable (onDropSuccess)="transferDataSuccess($event)">
                    <div class="quote-icon" [style.color]="bookModel.color">
                        <i class="fa fa-quote-left fa-5x"></i>
                    </div>
                    <p>{{ book[currentPageModel - 1][0].story }}</p>
                    <span class="page-number">{{ (currentPageModel * 2) }}</span>
                </div>
            </div>
        </div>

        <span *ngIf="currentPageModel !== 10" class="next" (click)="nextPage()"><i class="fa fa-chevron-right fa-3x"></i></span>

    </div>



    <div id="selection-bar">
            <ul class="children">
                <li *ngFor="let child of children" class="child-avatar" (click)="getQuotes(child.short_id)">
                    <img src="/assets/default-avatars/Male.svg">
                    <p>{{ child.full_name }}</p>
                </li>
            </ul>

            <span class="divider"></span>

            <span class="loading-spinner" *ngIf="isLoadingPosts"></span>

            <div *ngIf="!isLoadingPosts" class="posts">
                <div *ngIf="posts.length === 0">No memories for this child.</div>
                <div *ngFor="let post of posts" dnd-draggable [dragEnabled]="true" [dragData]="post" class="post">
                    <scrblr-book-page [pageData]="post" [src]="makePostUrl(null, post.short_id, post.img_baked_url_id)"></scrblr-book-page>
                </div>
            </div>
        </div>


</div>
